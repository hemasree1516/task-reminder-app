<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>To Do List</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css" />
</head>
<body>

<div id="toast" class="toast hidden"></div>

<header class="top-bar">
    <div class="logo-section">
        <div class="logo">
            <i class="fa-solid fa-list-check"></i>
            <h1>To Do List</h1>
        </div>
        <div class="header-info">
            <span id="liveGreeting">Hello!</span>
            <span id="liveClock">00:00:00</span>
        </div>
    </div>
    <div class="header-actions">
        <button class="pomo-trigger-btn" onclick="openPomodoro()">
            <i class="fa-solid fa-stopwatch"></i> Pomodoro
        </button>

        <button class="pomo-trigger-btn" style="background: #2e7d32;" onclick="window.open('https://docs.google.com/spreadsheets/d/1uROUAZ5lEaW2ONJ3EOsq3Ip8Qyc6DFtWvodhVuOXEtg/edit?usp=sharing', '_blank')">
            <i class="fa-solid fa-table-list"></i> Agile Sheet
        </button>

        <button class="add-btn" onclick="toggleAddTask()">+ Add Task</button>

        <button class="pomo-trigger-btn logout-btn" onclick="logout()">
            <i class="fa-solid fa-right-from-bracket"></i> Logout
        </button>
    </div>

</header>

<div class="container">
    <div class="stats-grid">
        <div class="stat-card fade-in">
            <div class="stat-icon blue"><i class="fa-solid fa-tasks"></i></div>
            <div class="stat-info"><span id="countTotal">0</span><p>Total Tasks</p></div>
        </div>
        <div class="stat-card fade-in">
            <div class="stat-icon orange"><i class="fa-solid fa-clock"></i></div>
            <div class="stat-info"><span id="countPending">0</span><p>Pending</p></div>
        </div>
        <div class="stat-card fade-in">
            <div class="stat-icon green"><i class="fa-solid fa-check-double"></i></div>
            <div class="stat-info"><span id="countDone">0</span><p>Completed</p></div>
        </div>
        <div class="stat-card fade-in progress-widget">
            <div class="progress-ring-container">
                <svg width="60" height="60">
                    <circle class="progress-ring-bg" stroke="#eee" stroke-width="5" fill="transparent" r="25" cx="30" cy="30"/>
                    <circle id="progressCircle" class="progress-ring-bar" stroke="#16a34a" stroke-width="5" stroke-dasharray="157" stroke-dashoffset="157" fill="transparent" r="25" cx="30" cy="30"/>
                </svg>
                <span id="progressText">0%</span>
            </div>
            <div class="stat-info"><p>Progress</p></div>
        </div>
    </div>

    <div class="quote-card fade-in slide-up">
        <i class="fa-solid fa-quote-left"></i>
        <p id="dailyQuote">Focus on being productive instead of busy.</p>
    </div>

    <div class="filter-wrapper slide-up">
        <div class="search-box">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input id="search" placeholder="Search task title..." oninput="resetPaginationAndFilter()" />
        </div>
        <div class="filter-group">
            <select id="statusFilter" class="styled-select" onchange="resetPaginationAndFilter()">
                <option value="">Status: All</option>
                <option value="PENDING">Pending</option>
                <option value="DONE">Done</option>
            </select>
            <select id="priorityFilter" class="styled-select" onchange="resetPaginationAndFilter()">
                <option value="">Priority: All</option>
                <option value="LOW">Low</option>
                <option value="MEDIUM">Medium</option>
                <option value="HIGH">High</option>
            </select>
            <button class="btn-clear" onclick="clearFilters()">Clear</button>
        </div>
    </div>

    <div class="view-switch slide-up">
        <button id="btnTable" class="active" onclick="showTableView()"><i class="fa-solid fa-table"></i> Table</button>
        <button id="btnCards" onclick="showCardView()"><i class="fa-solid fa-grip"></i> Cards</button>
        <button id="btnCalendar" onclick="showCalendarView()"><i class="fa-solid fa-calendar-days"></i> Calendar</button>
    </div>

    <div id="views">
        <div id="tableView" class="view"></div>
        <div id="cardView" class="view hidden"></div>
        <div id="calendarView" class="view hidden"></div>
    </div>

    <div id="pagination" class="pagination-container slide-up">
        <div class="page-size-selector">
            <label>Show:</label>
            <select id="itemsPerPageSelect" onchange="updatePageSize()">
                <option value="5">5</option>
                <option value="10" selected>10</option>
                <option value="20">20</option>
            </select>
            <span>per page</span>
        </div>
        <div class="page-nav">
            <button id="prevPage" class="pagination-btn" onclick="changePage(-1)"><i class="fa-solid fa-chevron-left"></i> Prev</button>
            <span id="pageInfo">Page 1 of 1</span>
            <button id="nextPage" class="pagination-btn" onclick="changePage(1)">Next <i class="fa-solid fa-chevron-right"></i></button>
        </div>
    </div>
</div>

<div id="taskModal" class="modal hidden">
    <div class="modal-content scale-in">
        <div class="modal-header">
            <h2 id="modalTitle">Add New Task</h2>
            <button class="close-modal" onclick="toggleAddTask()">×</button>
        </div>
        <div class="modal-body">
            <div class="input-group">
                <label>Title</label>
                <input id="title" placeholder="What needs to be done?" />
            </div>
            <div class="input-group">
                <label>Description</label>
                <textarea id="description" rows="3" placeholder="Task details..."></textarea>
            </div>
            <div class="form-row">
                <div class="input-group">
                    <label>Due Date</label>
                    <input id="dueDate" type="date" />
                </div>
                <div class="input-group">
                    <label>Priority Level</label>
                    <select id="priority">
                        <option value="LOW">Low</option>
                        <option value="MEDIUM">Medium</option>
                        <option value="HIGH">High</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-modal-cancel" onclick="toggleAddTask()">Cancel</button>
            <button class="btn-modal-save" onclick="saveTask()">Save Task</button>
        </div>
    </div>
</div>

<div id="pomoOverlay" class="pomo-overlay hidden">
    <div class="pomo-content">
        <div id="pomoSetup">
            <h2>Set Focus Time</h2>
            <div class="pomo-input-wrapper">
                <input type="number" id="pomoInput" value="25" min="1" max="120">
                <span>minutes</span>
            </div>
        </div>
        <div id="pomoTimer" class="hidden">00:00</div>
        <div class="pomo-controls">
            <button id="pomoStartBtn" class="pomo-main-btn" onclick="togglePomoTimer()">Start</button>
            <button class="pomo-sub-btn" onclick="resetPomoTimer()">Reset</button>
            <button class="pomo-sub-btn" onclick="closePomodoro()">Exit Fullscreen</button>
        </div>
    </div>
</div>
<script>
    function logout() {
        fetch("/auth/logout", { method: "POST" })
            .then(() => window.location.href = "/login.html");
    }
</script>
<footer class="app-footer">
    <p>© 2026 Task Reminder App · Empowering productivity through streamlined task management · An Infosys Internship Initiative</p>
</footer>

<script src="app.js"></script>
</body>
</html>
